<!-- Modal tipo overlay -->
<div
  class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"
>
  <div
    class="bg-white dark:bg-neutral rounded-lg shadow-lg w-full max-w-md p-6 relative"
  >
    <button class="absolute top-2 right-2 text-xl" (click)="cerrarModal()">
      ✖
    </button>
    <h2 class="text-lg font-bold mb-4">Agregar nuevo cliente</h2>

    <form [formGroup]="form" (ngSubmit)="guardar()" class="space-y-4">
      <div>
        <label class="label"><span class="label-text">Nombre</span></label>
        <input
          type="text"
          formControlName="nombre"
          class="input input-bordered w-full"
          placeholder="Por defecto (Cliente Nº)"
          [class.input-error]="
            form.get('nombre')?.invalid && form.get('nombre')?.touched
          "
        />
      </div>

      <div>
        <label class="label"><span class="label-text">Contacto</span></label>
        <input
          type="text"
          formControlName="contacto"
          class="input input-bordered w-full"
          placeholder="Ej: +1234567890"
          [class.input-error]="
            form.get('contacto')?.invalid && form.get('contacto')?.touched
          "
        />
      </div>

      <div>
        <label class="label"><span class="label-text">Clave</span></label>
        <input
          type="text"
          formControlName="clave"
          class="input input-bordered w-full"
          [class.input-error]="
            form.get('clave')?.invalid && form.get('clave')?.touched
          "
        />
      </div>
      <div
        class="text-sm text-red-500"
        *ngIf="form.get('nombre')?.errors?.['nombreDuplicado'] && form.get('nombre')?.touched"
      >
        Este nombre ya está registrado.
      </div>
      <div
        class="text-sm text-red-500"
        *ngIf="form.get('contacto')?.errors?.['contactoDuplicado'] && form.get('contacto')?.touched"
      >
        Este número ya está registrado.
      </div>

      <div
        class="text-sm text-red-500"
        *ngIf="form.get('contacto')?.errors?.['pattern'] && form.get('contacto')?.touched"
      >
        Número inválido. Debe comenzar con "+" seguido de 9 a 15 dígitos.
      </div>

      <div *ngIf="errorMsg" class="text-red-500 text-sm">{{ errorMsg }}</div>

      <div class="flex justify-end gap-2 mt-4">
        <button type="button" class="btn btn-outline" (click)="cerrarModal()">
          Cancelar
        </button>
        <button class="btn btn-primary" [disabled]="cargando || form.invalid">
          {{ cargando ? "Guardando..." : "Guardar" }}
        </button>
      </div>
    </form>
  </div>
</div>
